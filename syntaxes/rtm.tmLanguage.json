{
	"$schema": "https://raw.githubusercontent.com/martinring/tmlanguage/master/tmlanguage.json",
	"name": "RTM",
	"patterns": [
		{
			"include": "#comments"
		},
		{
			"include": "#keywords"
		},
		{
			"include": "#data-area"
		}
	],
	"repository": {
		"comments": {
			"patterns":[
				{
					"name": "comment.line.rtm",
					"match": "^\\*.*$"
				},
				{
					"name": "comment.block.rtm",
					"match": "<<.*?(>>|$)"
				}
			]
		},
		"keywords": {
			"patterns": [
				{
					"name": "keyword.reserved.rtm",
					"match": "\\b(?<!\\.)(OVERLAY|PROC|RETURN|ENDPROC|QUITZUG)\\b(?!\\.)"
				},
				{
					"name": "keyword.control.conditional.rtm",
					"match": "\\b(?<!\\.)(IF|WHILE|THEN|DO|END|CASE|ENDCASE)\\b(?!\\.)"
				},
				{
					"name": "keyword.dollar.rtm",
					"match": "^(\\$(ENTRY|ABORT|DATA|DATA,SHARED|ENTRY|EXT|EXTDATA|EXTRACT|FILE|FILES|INCLUDE|LIVE|LIVEUSER|NAME|NEWCLUSTERS|OPT|PROG|RECORD|SCRNDATA|SNAPSHOT|TEST|TESTUSER|USERDATA))\\b(?!\\.)"
				},
				{
					"name": "support.variable.rtm",
					"match": "\\B@[1234ABCR](?=\\b|_)"
				},
				{
					"name": "support.function.rtm",
					"match": "OUTIMM|READ|WRITE|INDEX"
				}
			]
		},
		"strings": {
			"name": "string.quoted.double.rtm",
			"begin": "\"",
			"end": "\""
		},
		"data-area": {
			"begin": "(?<=^\\$DATA\\b)",
			"end": "(?=^\\$)",
			"patterns":[
				{
					"include": "#comments"
				},
				{
					"name": "support.type.alphanumeric.rtm",
					"match":"(?<=\\s)[AX]\\d+\\b"
				},
				{
					"name": "support.type.numeric.rtm",
					"match":"(?<=\\s)[NUSFZ][BLP\\-]*\\d+(\\.\\d+)?\\b"
				},
				{
					"name": "support.type.date.rtm",
					"match":"(?<=\\s)D[AUEFDMYNHBL]+\\b"
				},
				{
					"name": "support.type.codestring.rtm",
					"begin": "(?<=\\s)(?=C\\^)",
					"end": "\\^{2}",
					"patterns":[
						{
							"match": "(\\^)(\\w+)(?=\\^)",
							"captures": {
								"2": {
									"name": "constant.numeric.rtm"
								}
							}
						}
					]
				}
			]
		},
		"constants": {
			"patterns": [
				{
					"name": "constant.numeric.rtm",
					"match": "\\b(?<![\\.@])\\d+\\b(?!\\.)"
				}
			]
		}
	},
	"scopeName": "source.rtm"
}